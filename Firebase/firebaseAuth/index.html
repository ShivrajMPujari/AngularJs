<html>
   <head>

      <link href='https://fonts.googleapis.com/css?family=Open+Sans:700,600' rel='stylesheet' type='text/css'>
      <!-- <link rel="stylesheet" href="firebaseAuth/index.css"> -->
      <!-- <script src="firebaseAuth/app.js" charset="utf-8"></script> -->
      <!-- <script src = "https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script> -->

      <!-- <script type = "text/javascript" src = "index.js"></script> -->


   </head>

   <body>

    <h3>hello <span id="username">there</span></h3>
    <button type="button" name="button" onclick="login()"></button>
    
   </body>
   <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
   <script>
     // Initialize Firebase
     var config = {
       apiKey: "AIzaSyCs7cOpgevQJ4BwyvNvZ0yoQ4dKB6eV_jU",
       authDomain: "demoproject-a85d5.firebaseapp.com",
       databaseURL: "https://demoproject-a85d5.firebaseio.com",
       projectId: "demoproject-a85d5",
       storageBucket: "",
       messagingSenderId: "709745305329"
     };
     firebase.initializeApp(config);

    function login(){

      function newLoginHappened(user){

        if(user){
          app(user);
        }else{
          var provider = new firebase.auth.GoogleAuthProvider();
      
                  provider.addScope('email');
        firebase.auth().signInWithPopup(provider).then(function(result) {
        // This gives you a Google Access Token.
        var token = result.credential.accessToken;
        
        // The signed-in user info.
        var user = result.user;
        console.log(user);
        });
          
        //           firebase.auth().signInWithPopup(provider).then(function(result) {
        //             console.log(result);
        // 
        //   // This gives you a Google Access Token. You can use it to access the Google API.
        //   var token = result.credential.accessToken;
        //   // The signed-in user info.
        //   var user = result.user;
        //   // ...
        // }).catch(function(error) {
        //   // Handle Errors here.
        //   var errorCode = error.code;
        //   var errorMessage = error.message;
        //   // The email of the user's account used.
        //   var email = error.email;
        //   // The firebase.auth.AuthCredential type that was used.
        //   var credential = error.credential;
        //   // ...
        // });
        }
      }

      firebase.auth().onAuthStateChanged(newLoginHappened);
    }

    function app(user){
      console.log("in app method");
      console.log(user.email);
      document.getElementById('username').innerHTML=user.displayName;
    }




   </script>

</html>
